<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<?rfc toc="yes"?>
<?rfc tocompact="yes"?>
<?rfc tocdepth="3"?>
<?rfc tocindent="yes"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="no"?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<rfc category="std" docName="draft-ietf-pce-association-group-10" ipr="trust200902">
  <front>
    <title abbrev="PCE association group">
    PCEP Extensions for Establishing Relationships Between Sets of LSPs</title>

    <author fullname="Ina Minei" initials="I." surname="Minei">
      <organization>Google, Inc.</organization>
      <address>
    <postal>
      <street>1600 Amphitheatre Parkway</street>
      <city>Mountain View</city>
      <region>CA</region>
      <code>94043</code>
      <country>US</country>
    </postal>
    <email>inaminei@google.com</email>
      </address>
    </author>

    <author fullname="Edward Crabbe" initials="E." surname="Crabbe">
      <organization>Individual Contributor</organization>
      <address>
        <email>edward.crabbe@gmail.com</email>
      </address>
    </author>

    <author fullname="Siva Sivabalan" initials="S." surname="Sivabalan">
      <organization>Cisco Systems, Inc.</organization>
      <address>
    <postal>
      <street>170 West Tasman Dr.</street>
      <city>San Jose</city>
      <region>CA</region>
      <code>95134</code>
      <country>US</country>
    </postal>
    <email>msiva@cisco.com</email>
      </address>
    </author>

    <author fullname="Hariharan Ananthakrishnan" initials="H." surname="Ananthakrishnan">
      <organization>Netflix</organization>
      <address>
    <email>hari@netflix.com</email>
      </address>
    </author>

    <author fullname="Dhruv Dhody" initials="D." surname="Dhody">
      <organization>Huawei</organization>
      <address>
        <postal>
          <street>Divyashree Techno Park, Whitefield</street>
          <city>Bangalore</city>
          <region>KA</region>
          <code>560066</code>
          <country>India</country>
        </postal>
        <email>dhruv.ietf@gmail.com</email>
        <!-- uri and facsimile elements may also be added -->
      </address>
    </author>


    <author fullname="Yosuke Tanaka" initials="Y." surname="Tanaka">
      <organization>NTT Communications Corporation</organization>
      <address>
    <postal>
      <street>Granpark Tower 3-4-1 Shibaura, Minato-ku
</street>
      <city>Tokyo</city>
      <region></region>
      <code>108-8118</code>
      <country>Japan</country>
    </postal>
    <email>yosuke.tanaka@ntt.com</email>
      </address>
    </author>

    <date year="2019"  />

    <workgroup>PCE Working Group</workgroup>
    <keyword>PCE, PCEP, Association, Group</keyword>

    <abstract>
    <t>This document introduces a generic mechanism to create a grouping of Label Switched Paths (LSPs) in the
       context of a Path Computation Element (PCE).
       This grouping can then be used to define associations between sets of LSPs or between a
       set of LSPs and a set of attributes (such as configuration parameters or behaviors),
       and is equally applicable to the stateful PCE (active and passive modes) as well as the stateless PCE.
       </t>
    </abstract>

    <note title="Requirements Language">
      <t><!--The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <xref target="RFC2119"/>.-->
      
      The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
      NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
      "MAY", and "OPTIONAL" in this document are to be interpreted as
      described in BCP 14 <xref target="RFC2119"/> <xref target="RFC8174"/> when, and only when, they
      appear in all capitals, as shown here.

      </t>

    </note>
  </front>

  <middle>
    <section title="Introduction">
      <t><xref target="RFC5440"/> describes the Path Computation Element (PCE)
      Communication Protocol (PCEP).  PCEP enables the communication between a Path Computation
      Client (PCC) and a PCE, or between PCE and PCE,
      for the purpose of computation of Multiprotocol Label Switching (MPLS) as well
      as Generalized MPLS (GMPLS) Traffic
      Engineering Label Switched Path (TE LSP) characteristics.
      </t>

      <t><xref target='RFC8231'></xref>  specifies a
      set of extensions to PCEP to enable stateful
      control of TE LSPs within and across PCEP sessions in compliance with
      <xref target="RFC4657"/>. It includes mechanisms to effect LSP State Synchronization between PCCs and PCEs,
   delegation of control over LSPs to PCEs, and PCE control of timing
   and sequence of path computations within and across PCEP sessions. The model of
      operation where LSPs are initiated from the PCE is described in
      <xref target='RFC8281'></xref>.
      </t>

      <t><xref target='RFC6780'/> defines the RSVP ASSOCIATION object, which was defined in the context of 
      GMPLS-controlled Label Switched Paths (LSPs) to be used to associate recovery LSPs with the LSP they are protecting.
   This object also has broader applicability as a mechanism to
   associate RSVP state and <xref target='RFC6780'/> described how the ASSOCIATION
   object can be more generally applied.</t>

       <t> This document introduces a generic mechanism to create a grouping of LSPs.
       This grouping can then be used to define associations between sets of LSPs or between a
       set of LSPs and a set of attributes (such as configuration parameters or behaviours),
       and is equally applicable to stateful PCE (active and passive modes) and stateless PCE.
       The associations could be created dynamically and conveyed to a PCEP peer within PCEP, or
       it could be configured manually by an operator on the PCEP peers. Refer <xref target="Operation-overview"/> for more details.
       </t>
       

    </section> <!-- Introduction -->

    <section title="Terminology">
      <t>This document uses the following terms defined in <xref
      target="RFC5440"/>: PCC, PCE, PCEP Peer, Path Computation Request (PCReq), Path Computation Reply (PCRep), and PCEP Error (PCErr).</t>
      <t>This document uses the following terms defined in <xref
      target="RFC8051"/>: Stateful PCE, Active Stateful PCE, Passive Stateful PCE, and Delegation.</t>
      <t>This document uses the following terms defined in <xref
      target="RFC8231"/>: LSP State
   Report (PCRpt), LSP Update Request (PCUpd), and State Timeout Interval.</t>
      <t>This document uses the following terms defined in <xref
        target='RFC8281'/>: PCE-initiated LSP, and LSP Initiate Request (PCInitiate).</t>

      <!-- No longer needed! <t> The following term is defined in this document: </t>

      <t> Association Timeout Interval: when a PCEP session is terminated,
      a PCC waits for this time period before deleting associations created by the PCEP peer.
      </t>-->
    </section> <!-- Terminology -->


    <section anchor="Overview" title="Architectural Overview">
     <section anchor="Motivation" title="Motivation">
     <t>
         <!--Stateful PCE provides the ability to update existing LSPs and to instantiate new ones.
         To enable support for PCE-controlled make-before-break and for protection, there is a need
         to define associations between LSPs. For example, the association between the original
         and the re-optimized path in the make-before break scenario, or between the
         working and protection path in end-to-end protection. Another use for LSP grouping is for
         applying a common set of configuration parameters or behaviors to a set of LSPs.-->

         Stateful PCE provides the ability to update existing LSPs and to
         instantiate new ones. There are various situations where several
         LSPs need to share common information. E.g., to support for
         PCE-controlled make-before-break, an association between the original
         and the re-optimized path is desired. Similarly, for end-to-end protection, the association 
         between working and protection LSPs is required. Another use for the LSP grouping is for
         applying a common set of configuration parameters or behaviours to a set of LSPs.
     </t>
    <t>
      For a  stateless PCE, it might be useful to associate a path
      computation request to an association group, thus enabling it to associate
      a common set of policy, configuration parameters or behaviours with the request.
     </t>
     <t>Some associations could be created dynamically, such as association between the working and protections LSPs of a tunnel, whereas
        some associations could be created by the operator manually, such as policy-based association, where the LSP could join
        an operator-configured existing association.</t>
    <t>
     Rather than creating separate mechanisms for each use case, this document defines a generic mechanism that can
     be reused as needed.
     </t>
      </section><!-- Motivation -->
      <section title="Relationship with the SVEC List">
       <t>Note that, <xref target="RFC5440"/> defines a mechanism for the synchronization of a set of path computation requests 
   by using the SVEC (Synchronization VECtor) object, that specifies the list of synchronized
   requests that can either be dependent or independent. The SVEC object identifies the relationship between the set of path computation requests, identified by 'Request-ID-number' in RP (Request Parameters) object. <xref target="RFC6007"/> further clarifies the use of the SVEC list for
   synchronized path computations when computing dependent requests as well as describes a number of usage scenarios for SVEC
   lists within single-domain and multi-domain environments.</t> 
       <t>The motivation behind the association group defined in this document
   and the SVEC object are quite different, though some use cases may
   overlap.  PCEP extensions that define a new association type should
   clarify the relationship between the SVEC object and the association
   type, if any.</t>
       </section>


      <section anchor="Operation-overview" title="Operation Overview">
     <t>
     LSPs are associated with other LSPs with which they interact by
     adding them to a common association group.  Association groups as
     defined in this document can be applied to LSPs originating at the same head end
     or different head ends.</t>

     <t>Some associations could be created dynamically by a PCEP speaker and the associations (along with the set of LSPs) are conveyed to a PCEP peer.
        Whereas some associations are configured by the operator on the PCEP peers involved before hand, a PCEP speaker then could ask for a LSP to join the operator-configured association. Usage of dynamic and configured association is usually dependent on the type of the association.</t>

        <t>For the operator-configured association, the association parameters such as the association identifier, association type,
     as well as the association source IP address, are manually configured by the
   operator. In case of dynamic association, the association parameters such as the association identifier, are allocated dynamically by the PCEP speaker, the association source is set as local PCEP speaker address, unless local policy dictates otherwise, in which case association source is set based on the local policy.</t> 

     <t>The dynamically created association can be reported to the PCEP peer
     via the PCEP messages as per the stateful extensions. While the operator-configured association is known to the PCEP peer before hand, a PCEP peer could ask for a LSP to join the operator-configured association via the stateful PCEP messages.</t>

    <t>The associations are properties of the LSP and thus could be stored in the LSP state database. The dynamic association exists as long as the LSP
state exists. In case of PCEP session termination, the LSP state clean-up MUST also take care of associations.</t>


     <!--<t>For LSPs originating at the same head end, the association
     can be initiated by either the PCC (head end)  or by a PCE.  Only a stateful
     PCE can initiate an association for LSPs originating at different head ends.
     For both cases, the association is uniquely identified by the combination of an association
     identifier and the address of the node that created the association.
     </t>-->

     <t>
         Multiple types of associations can exist, each with their own association identifier space.
     The definition of the different association types and their behaviours is
     outside the scope of this document.  The establishment and removal of the
     association relationship can be done on a per LSP basis.
     An LSP may join multiple association groups, of different or of the same association type.
         </t>

    <!--<t>
    In the case of a stateless PCE, associations are created out of band, and
    PCEP peers should be aware of the association and its significance
    outside of the protocol.
    </t>-->

    <!--<t>
    Association groups can be created by both PCC and PCE. When a PCC's
    PCEP session with a PCE terminates unexpectedly, the PCC cleans up associations (as per
    the processing rules in this document).
    </t>-->



      </section><!-- Operation overview -->
      <section title="Operator-configured Association Range" anchor="Range">
        <t>Some association types are dynamic, some are operator-configured and some could be both. For the association types that could be both dynamic and operator-configured and use the same association source, <!--it is necessary to configure a range of association identifiers that are marked for operator-configured associations to avoid any association identifier clash within the scope of the association source.-->it is necessary to distinguish a range of association identifiers that
   are marked for operator-configured associations to avoid any
   association identifier clash within the scope of the association
   source. This document assumes that these two ranges are configured.
</t>

        <t>A range of association identifiers for each Association type (and Association Source) are kept for the operator-configured associations.
            Dynamic associations MUST NOT use the association identifier from this range. </t>

        <t>This range as set at the PCEP speaker (PCC or PCE, as an association source) needs to be communicated to a PCEP peer in the Open Message. 
          A new TLV is defined in this specification for this purpose (<xref target="Range-tlv"/>). See <xref target="ex"/> for an example.</t>   

        <t>Association identifier range for sources other than the PCEP speaker (for example an NMS system) is not communicated in PCEP and the procedure for operator-configured association range setting is outside the scope of this document.</t>



            <!--<t>All operator-configured associations MUST use identifier from the
               range 0x10000 to 0xffffF and encode it in the extended association
               id TLV. (<xref target="EXT-association"/>)</t>-->
      </section>
     </section><!-- Overview -->

    <section anchor="Discovery" title="Discovery of Supported Association Types ">
   <t>This section defines PCEP extensions so as to support
   the capability advertisement of the association types supported by a PCEP speaker.</t>

   <t>A new PCEP ASSOC-Type-List (Association Types list) TLV is defined.  The
   PCEP ASSOC-Type-List TLV is carried within an OPEN object.  This way, during
   PCEP session-setup phase, a PCEP speaker can advertise to a PCEP peer the list
   of supported Association types.</t>
   <section title="ASSOC-Type-List TLV">
   <t>The PCEP ASSOC-Type-List TLV is optional.  It MAY be carried within an OPEN
   object sent by a PCEP speaker in an Open message to a PCEP peer so as to
   indicate the list of supported Association types.</t>

   <t>The PCEP ASSOC-Type-List TLV format is compliant with the PCEP TLV format defined
   in <xref target="RFC5440"/>.  That is, the TLV is composed of 2 octets for the type,
   2 octets specifying the TLV length, and a Value field.  The Length
   field defines the length of the value portion in octets.  The TLV is
   padded to 4-octet alignment, and padding is not included in the
   Length field (e.g., a 3-octet value would have a length of three, but
   the total size of the TLV would be eight octets).</t>

   <t>The PCEP ASSOC-Type-List TLV has the following format:    
     <figure anchor="ASSOC-Type-List" title="The ASSOC-Type-List TLV format">
     <artwork><![CDATA[    
TYPE:    TBD
LENGTH:  N * 2 (where N is the number of association types)
VALUE:   list of 2-byte association type code points, identifying
         the association types supported by the sender of the Open
         message.

   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |          Assoc-type #1        |      Assoc-type #2            |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  //                                                             //
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |          Assoc-type #N        |       padding                 |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   ]]></artwork></figure>
   </t>
   <t>Assoc-type (2 bytes): Association type code point identifier.  IANA
   manages the "ASSOCIATION Type Field" code point registry (see <xref target="iana_assoc_type"/>).</t>
   <section title="Procedure">
   <t>A PCEP speaker MAY include an ASSOC-Type-List TLV within an OPEN object in an Open
   message sent to a PCEP peer in order to advertise a set of one or
   more supported association types.  The ASSOC-Type-List TLV MUST NOT appear more than
   once in an OPEN object.  If it appears more than once, the PCEP
   session MUST be rejected with error type 1 and error value 1 (PCEP
   session establishment failure / Reception of an invalid Open
   message). As specified in <xref target="RFC5440"/>, a PCEP peer that does not recognize the
   ASSOC-Type-List TLV will silently ignore it.</t>  

   <t>The use of ASSOC-Type-List TLV is OPTIONAL. Thus the absence of the ASSOC-Type-List TLV in an OPEN object MUST be interpreted as an absence of information on the list of supported
   Association types (rather than the Association type is not supported). <!--The PCEP speaker could still use the ASSOCIATION object, if the peer does not support the association, it
   would react as per the procedure described in <xref target="Rules"/>.-->In this case, the PCEP
   speaker could still use the ASSOCIATION object: if the peer does not
   support the association, it will react as per the procedure described
   in <xref target="Rules"/>.</t> 

   <t>Association type (to be defined in other documents) can specify if the association type advertisement is mandatory for it. For an association type that specifies that the advertisement is mandatory, a missing Assoc-type in the ASSOC-Type-List TLV (or missing ASSOC-Type-List TLV) is to be interpreted as the association type is not supported by the PCEP speaker.</t>   

   <t><!--It is RECOMMENDED that the PCEP implementation include all supported association-types (including optional) to ease the operations of the PCEP peer.-->
     In case the use of the ASSOC-Type-List TLV is triggered by a mandatory association type, then it is RECOMMENDED that the PCEP implementation include all supported Association types (including optional) to ease the operations of the PCEP peer.</t>
       
   </section>
   </section>
    </section>
    <section anchor="Range-tlv" title="Operator-configured Association Range TLV">
    <t>This section defines PCEP extension to support
   the advertisement of the Operator-configured Association Range used for an Association type by the PCEP speaker (as an Association source).</t>

   <t>A new PCEP OP-CONF-ASSOC-RANGE (Operator-configured Association Range) TLV is defined.  The
   PCEP OP-CONF-ASSOC-RANGE TLV is carried within an OPEN object.  This way, during
   PCEP session-setup phase, a PCEP speaker can advertise to a PCEP peer 
   the Operator-configured Association Range for an association type.</t>

   <t>The PCEP OP-CONF-ASSOC-RANGE TLV is optional.  It MAY be carried within an OPEN
   object sent by a PCEP speaker in an Open message to a PCEP peer. 
   The OP-CONF-ASSOC-RANGE TLV format is compliant with the PCEP TLV format defined
   in <xref target="RFC5440"/>.  That is, the TLV is composed of 2 bytes for the type,
   2 bytes specifying the TLV length, and a Value field.  The Length
   field defines the length of the value portion in bytes.</t>

   <t>The PCEP OP-CONF-ASSOC-RANGE TLV has the following format:</t>
     <figure anchor="OP-CONF-ASSOC-RANGE" title="The OP-CONF-ASSOC-RANGE TLV format">
     <artwork><![CDATA[
TYPE:    29 (Early allocation by IANA)
LENGTH:  N * 8 (where N is the number of association types)
VALUE:   

 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             Reserved          |          Assoc-type #1        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      Start-Assoc-ID #1        |           Range #1            |        
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
//                                                             //
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             Reserved          |          Assoc-type #N        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      Start-Assoc-ID #N        |           Range #N            |        
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


]]></artwork></figure>
<t>The Value portion includes the following fields, repeated for each association type:
	<list>
   <t>Reserved (2 bytes): This field MUST be set to 0 on
   transmission and MUST be ignored on receipt.</t>
   <t>Assoc-type (2 bytes): The association type (<xref target="iana_assoc_type"/>).
        The association types are defined in separate documents.</t>
   <t>Start-Assoc-ID (2 bytes): The start association identifier for the Operator-configured Association Range for the particular association type. The values 0 and 0xffff MUST NOT be used.</t>
   <t>Range (2 bytes): The number of associations marked for the Operator-configured Associations. The Range MUST be greater than 0, and it MUST be such that (Start-Assoc-ID + Range) do not cross the association identifier range of 0xffff.</t>
</list></t>
<section title="Procedure">
   <t>A PCEP speaker MAY include an OP-CONF-ASSOC-RANGE TLV within an OPEN object in an Open
   message sent to a PCEP peer in order to advertise the Operator-configured Association Range for an association type. 
   The OP-CONF-ASSOC-RANGE TLV MUST NOT appear more than
   once in an OPEN object.  If it appears more than once, the PCEP
   session MUST be rejected with error type 1 and error value 1 (PCEP
   session establishment failure / Reception of an invalid Open
   message).</t> 

   <t>As specified in <xref target="RFC5440"/>, a PCEP peer that does not recognize the
   OP-CONF-ASSOC-RANGE TLV will silently ignore it.</t>

   <t>The Operator-configured Association Range SHOULD be included for each association type that could be both dynamic and operator-configured. For association types that are only dynamic or only operator-configured, this TLV MAY be skipped, in which case the full range of association identifier is considered dynamic or operator-configured respectively. 
    Each association type (that are defined in separate documents) can specify the default value for the operator-configured association range for their respective association type. </t>

    <!--<t>An Assoc-Type MUST be present only once in the OP-CONF-ASSOC-RANGE TLV, if the same Assoc-Type is present more than once, the PCEP
   session MUST be rejected with error type 1 and error value 1 (PCEP
   session establishment failure / Reception of an invalid Open
   message).</t>-->

   <t>The absence of the OP-CONF-ASSOC-RANGE TLV in an OPEN object MUST be
   interpreted as an absence of explicit Operator-configured Association Range at the PCEP peer. 
   In this case, the default behavior as per each association type applies. If the association 
   source is not a PCEP speaker, the default value for the operator-configured association range is used for the association source.</t> 

   <t>If the Assoc-type is not recognized or supported by the PCEP speaker, it MUST ignore that respective Start-Assoc-ID and Range. If the Start-Assoc-ID or Range are set incorrectly, the PCEP
   session MUST be rejected with error type 1 and error value 1 (PCEP
   session establishment failure / Reception of an invalid Open
   message). </t>
   <t>The Assoc-type MAY appear more than once in the OP-CONF-ASSOC-RANGE TLV in the case of a non-contiguous Operator-configured Association Range. The PCEP speaker originating this TLV MUST NOT carry overlapping ranges for an association type. If a PCEP peer receives overlapping ranges for an association type, it MUST consider the Open message malformed and MUST reject the PCEP session with error type 1 and error value 1 (PCEP
   session establishment failure / Reception of an invalid Open
   message).</t>

   <t><!--In case, there is an operator-configured association that was configured with association parameters (such as association identifier, association type and association source) at the local PCEP speaker, later the PCEP session gets established with the association source and a new operator-configured range is learned during session establishment.-->
   There may be cases where an operator-configured association was
   configured with association parameters (such as association
   identifier, association type and association source) at the local
   PCEP speaker, and later the PCEP session gets established with the
   association source and a new operator-configured range is learned
   during session establishment. 
 At this time, the local PCEP speaker MUST remove any associations that are not in the new operator-configured range (by disassociating any LSPs that are part of it (and notifying this change to the PCEP peer)). If a PCEP speaker receives an association for an operator-configured association 
      and the association identifier is not in the operator-configured association range for the association type and association source, it MUST generate an error (as described in <xref target="Rules"/>).</t>
</section>
    </section>
    <section anchor="association" title="ASSOCIATION Object">
    <section anchor="Definition" title="Object Definition">

        <!--Creation of an association group and modifications to its membership
        can be initiated by either the PCE or the PCC.-->
         <t>Association groups
        and their memberships are defined using a new ASSOCIATION object.
      </t>

    <t>ASSOCIATION Object-Class is 40 (Early allocation by IANA).</t>
    <t> ASSOCIATION Object-Type is 1 for IPv4 and its format is shown in
    <xref target="Association-Object-Fmt1"/>:</t>

     <figure anchor="Association-Object-Fmt1" title="The IPv4 ASSOCIATION Object format">
     <artwork><![CDATA[

 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Reserved              |            Flags            |R|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      Association type         |      Association ID           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              IPv4 Association Source                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
//                   Optional TLVs                             //
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

          ]]></artwork>
        </figure>

    <t> ASSOCIATION Object-Type is 2 for IPv6 and its format is shown in
    <xref target="Association-Object-Fmt2"/>:</t>

     <figure anchor="Association-Object-Fmt2" title="The IPv6 ASSOCIATION Object format">
     <artwork><![CDATA[

 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Reserved              |            Flags            |R|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      Association type         |      Association ID           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
|                    IPv6 Association Source                    |
|                                                               |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
//                   Optional TLVs                             //
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

          ]]></artwork>
        </figure>
        <t> Reserved (2-byte): MUST be set to 0 and ignored upon receipt. </t>
    <t>
    Flags (2-byte): The following flags are currently defined:

    <list style="hanging">
            <t hangText="R (Removal - 1 bit):"> when set, the requesting
            PCEP peer requires the removal of an LSP from the association group. 
            When unset, the PCEP peer indicates that the LSP is added or retained as part of the association group. 
            This flag is used for the ASSOCIATION object in the PCRpt and the PCUpd message, the flag is ignored 
            in other PCEP messages. </t>
    </list>
    </t>
    <t>
    Association type (2-byte): the association type (<xref target="iana_assoc_type"/>).
        The association type are defined in separate documents.
    </t>

    <t> Association ID (2-byte): the identifier of the association group.  When combined
    with other association parameters, such as Association Type and Association Source, this value uniquely identifies an association group.
    The values 0xffff and 0x0 are reserved. The value 0xffff is used to indicate
    all association groups and could be used with R flag to indicate removal for all associations for the LSP within the scope of association type and association source.
    </t>


    <t> <!--Association Source: 4 or 16 bytes - An IPv4 or IPv6 address. This could be the IP
        address of the PCEP speaker that created a dynamic association, an operator configured IP address, or an IP
        address selected as per the local policy. The value such as 0.0.0.0 or ::/128 are acceptable.-->
        Association Source: 4 or 16 bytes - A valid IPv4 or IPv6 address that provides scoping for the Association ID.
        See <xref target="AssocSrc"/> for details. 
    </t>

    <t> Optional TLVs: The optional TLVs follow the PCEP TLV format
        of <xref target="RFC5440"/>. This document defines two optional TLVs. Other documents can define more TLVs in future.
    </t>

    <section anchor="Global-association-src" title="Global Association Source TLV">

      <t> The Global Association Source TLV is an optional TLV for use in the Association Object. 
        The meaning and the usage of Global Association Source is as per <xref target="RFC6780"/>.
      </t>

   <figure anchor="Global-Association-Object-Fmt1" title="The Global Association Source TLV  format">
     <artwork><![CDATA[

 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Type                  |            Length             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              Global Association Source                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


          ]]></artwork>
        </figure>
    <t> Type: 30 (Early allocation by IANA). </t>
    <t> Length: Fixed value of 4 bytes. </t>
    <t> Global Association Source: as defined in <xref target="RFC6780"/>. </t>

    </section>



    <section anchor="EXT-association" title="Extended Association ID TLV">

      <t> The Extended Association ID TLV is an optional TLV for use in
      the Association Object. The meaning and the usage of Extended Association ID is as per <xref target="RFC6780"/>.
      </t>

   <figure anchor="Ext-id-Object-Fmt1" title="The Extended Association ID  TLV  format">
     <artwork><![CDATA[

 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Type                  |            Length             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
//                Extended Association ID                      //
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


          ]]></artwork>
        </figure>
    <t> Type: 31 (Early allocation by IANA). </t>
    <t> Length: variable. </t>
    <t> Extended Association ID: as defined in <xref target="RFC6780"/>. </t>

    </section>
    <section title="Association Source" anchor="AssocSrc">
    <t>The Association Source field in the ASSOCIATION object is 
   set to a valid IP address to identify the node that originates the association. In case of dynamic associations, the association source is usually set as the local PCEP speaker address, unless local policy dictates otherwise, in which case association source is set based on the local policy. In case of PCE redundancy, local policy could set the source as a virtual IP address which identifies all instances of
   the PCE. In case of operator-configured association, the association source is manually configured and it could be set as one of the PCEP speakers, Network Management System (NMS), or any other 
   valid IP address that scopes the association identifier for the association type.</t>
    </section>

    <section title="Unique Identification for an Association Group" anchor="id">
    <t>The combination of the mandatory fields Association type, Association ID and Association Source in the ASSOCIATION object uniquely identify the association group. If the optional TLVs - Global Association Source or Extended Association ID are included, then they MUST be included in combination with mandatory fields to uniquely identifying the association group. In this document, all these fields are called 'association parameters'. Note that the ASSOCIATION object MAY include other optional TLVs (not defined in this document) based on the 
    association types, that provides 'information' related to the association type, this document uses the term 'association information' for it. </t>
    </section>
    </section> <!-- Object Definition -->
    <section title="Relationship with the RSVP ASSOCIATION">
        <t>The format of PCEP ASSOCIATION Object defined in this document is aligned with the RSVP ASSOCIATION object (<xref target="RFC6780"/>). Various Association types related to RSVP association 
        are defined in <xref target="RFC4872"/>, <xref target="RFC4873"/>, and <xref target="RFC7551"/>. The PCEP extensions that define new association types, should clarify how the PCEP associations would work with RSVP associations and vice-versa.</t>
       </section>

    <section  anchor="Object-Encoding" title="Object Encoding in PCEP messages">
     <t>Message formats in this document are expressed using Reduced BNF (RBNF) as used in <xref target="RFC5440"/> and defined in <xref target="RFC5511"/>.</t> 
    <section  title="Stateful PCEP messages">

    <t> The ASSOCIATION Object is OPTIONAL and MAY be carried in the Path
    Computation Update (PCUpd), Path Computation Report (PCRpt) and Path
    Computation Initiate (PCInitiate) messages. </t>

    <t> When carried in PCRpt message, it is used to report the association
    group membership pertaining to a LSP to a stateful PCE. 
    The PCRpt message are used for both initial state synchronization operations (Section 5.6 of
    <xref target="RFC8231"/>) as well as whenever the state of the LSP changes. The
    associations MUST be included during the state synchronization operations.</t>
    <t>The PCRpt message can also be used to remove an LSP from one or more association groups
    by setting the R flag to 1  in the ASSOCIATION object.</t>
    <t>When an LSP is first reported to the PCE, the PCRpt message MUST include all the association groups that it belongs to. Any subsequent report message SHOULD include only the associations that are being modified or removed.</t>

    <t> The PCRpt message is defined in <xref target='RFC8231'></xref>
    and updated as below:</t>

    <figure>
    <artwork><![CDATA[

   <PCRpt Message> ::= <Common Header>
                       <state-report-list>
   Where:

      <state-report-list> ::= <state-report>[<state-report-list>]

      <state-report> ::= [<SRP>]
                         <LSP>
                         [<association-list>]
                         <path>
    Where:
      <path>::= <intended-path>
                [<actual-attribute-list><actual-path>]
                <intended-attribute-list>


      <association-list> ::= <ASSOCIATION> [<association-list>]
    ]]></artwork>
    </figure>

    <t> When an LSP is delegated to a stateful PCE, the stateful PCE can create
    a new association group for this LSP, or associate it with one or more existing
    association groups. This is done by including the  ASSOCIATION Object in a
    PCUpd message.  A stateful PCE can also remove a delegated
    LSP from one or more association groups by setting the R flag to 1 in the ASSOCIATION object.</t>

    <t>The PCUpd message SHOULD include the association groups that are being modified or removed, there is no need to include associations that remains unchanged.</t>

    <t> The PCUpd message is defined in <xref target='RFC8231'></xref>
    and updated as below:</t>

    <figure>
       <artwork><![CDATA[
    <PCUpd Message> ::= <Common Header>
                        <update-request-list>
 Where:

    <update-request-list> ::= <update-request>[<update-request-list>]

    <update-request> ::= <SRP>
                         <LSP>
                         [<association-list>]
                         <path>
 Where:
    <path>::= <intended-path><intended-attribute-list>

    <association-list> ::= <ASSOCIATION> [<association-list>]
     ]]></artwork>
    </figure>
    <t>Unless a PCEP speaker wants to delete an association
    from an LSP or make changes to the association, it does not need to carry the ASSOCIATION
    object in future stateful messages.</t>

    <t>A PCE initiating a new LSP can also include the association groups that this LSP belongs to. This is done by including the ASSOCIATION Object in a
    PCInitiate message. The PCInitiate message MUST include all the association groups that it belongs to.
    The PCInitiate message is defined in <xref target='RFC8281'></xref>
    and updated as below:
    </t>
    <figure>
      <artwork><![CDATA[
<PCInitiate Message> ::= <Common Header>
                         <PCE-initiated-lsp-list>
Where:

<PCE-initiated-lsp-list> ::= <PCE-initiated-lsp-request>
                             [<PCE-initiated-lsp-list>]

<PCE-initiated-lsp-request> ::= (<PCE-initiated-lsp-instantiation>|
                                <PCE-initiated-lsp-deletion>)

<PCE-initiated-lsp-instantiation> ::= <SRP>
                                      <LSP>
                                      [<END-POINTS>]
                                      <ERO>
                                      [<association-list>]
                                      [<attribute-list>]

Where:
<association-list> ::= <ASSOCIATION> [<association-list>]
    ]]></artwork>
    </figure>
    </section>
    <section  title="Request Message">
    <t>
    In case of passive (stateful or stateless) PCE, the ASSOCIATION Object
    is OPTIONAL and MAY be carried in the Path Computation Request
   (PCReq) message.
   </t>
   <t>
    When carried in a PCReq message, the ASSOCIATION Object is used to associate the path
   computation request to an association group. The association (and the other LSPs) should be known to the PCE before hand.
   These could be operator-configured or dynamically learned before via stateful PCEP messages. The R flag in ASSOCIATION object within PCReq message
   MUST be set to 0 while sending and ignored on receipt.

   </t>
   <t>
   The PCReq message is defined in <xref target="RFC5440"/>  and updated in
   <xref target="RFC8231"/> , it is further updated below for
   association:
   </t>

    <figure>
      <artwork><![CDATA[
<PCReq Message>::= <Common Header>
                   [<svec-list>]
                   <request-list>

Where:
      <svec-list>::= <SVEC>[<svec-list>]
      <request-list>::= <request>[<request-list>]

      <request>::= <RP>
                   <END-POINTS>
                   [<LSP>]
                   [<LSPA>]
                   [<BANDWIDTH>]
                   [<metric-list>]
                   [<association-list>]
                   [<RRO>[<BANDWIDTH>]]
                   [<IRO>]
                   [<LOAD-BALANCING>]

Where:
      <association-list> ::= <ASSOCIATION> [<association-list>]
    ]]></artwork>
    </figure>
    <t>
   Note that the LSP object MAY be present for the passive stateful PCE mode.

    </t>
    </section>
    <section  title="Reply Message">
<t>
    In case of passive (stateful or stateless) PCE, the ASSOCIATION Object
    is OPTIONAL and MAY be carried in the Path Computation Reply
   (PCRep) message with the NO-PATH object. The ASSOCIATION object in PCRep message indicates the 
   association group that cause the PCE to fail to find a path.
   </t>
   <t>
   The PCRep message is defined in <xref target="RFC5440"/>  and updated in
   <xref target="RFC8231"/> , it is further updated below for
   association:
   </t>

    <figure>
      <artwork><![CDATA[
<PCRep Message> ::= <Common Header>
                    <response-list>
Where:

<response-list>::=<response>[<response-list>]

<response>::=<RP>
             [<LSP>]
             [<NO-PATH>]
             [<association-list>]
             [<attribute-list>]
             [<path-list>]

Where:
      <association-list> ::= <ASSOCIATION> [<association-list>]
    ]]></artwork>
    </figure>
    <t>
   Note that the LSP object MAY be present for the passive stateful PCE mode.
    </t>      
    </section>
    </section> <!-- Object Encoding -->

    <section  anchor="Rules" title="Processing Rules">

    <t>
    Association groups can be operator-configured on the necessary PCEP speakers and  the PCEP speakers can join the existing association groups. 
    In addition, a PCC or a PCE can create association groups dynamically and the PCEP speaker can also report the associations to its peer via PCEP messages.
    The operator-configured associations are created via configurations (where all association parameters are manually set) and exist until explicitly removed via configurations. The PCEP speaker can add LSPs to these configured associations and carry this via stateful PCEP messages. The dynamic associations are created dynamically by the PCEP speaker (where all association parameters are populated dynamically). The association group is attached to the LSP state, and the association group exists till there is at least one LSP as part of the association. As described in <xref target="id"/>, the association parameters are the combination of Association type, Association ID and Association Source as well as optional global source and extended association identifier, that uniquely identifies an association group. The information related to the association types encoded via the TLVs of a particular association type (not described in this document) are the association information (<xref target="id"/>).</t>

    <!--But a PCE peer cannot add new members for association group created by
    another peer.-->
    <t>If a
    PCEP speaker does not recognize the ASSOCIATION object, it will return a PCErr
    message with Error-Type  "Unknown Object" as described in <xref target="RFC5440"/>.
    If a
    PCEP speaker understands the ASSOCIATION object but does not support the Association type,
    it MUST return a PCErr
    message with Error-Type 26 (Early allocation by IANA) "Association Error" and Error-Value
    1 "Association type is not supported".
    If any association parameters are invalid in the ASSOCIATION object, the PCEP speaker 
    would consider this as malformed object and handle it as malformed message <xref target="RFC5440"/>.
    On receiving a PCEP
    message with ASSOCIATION, if a
    PCEP speaker finds that too many LSPs belong to the association group, it MUST
    return a PCErr message with Error-Type 26 (Early allocation by IANA) "Association Error" and Error-Value
    2 "Too many LSPs in the association group". If a PCEP speaker cannot handle
    a new association, it MUST
    return a PCErr message with Error-Type 26 (Early allocation by IANA) "Association Error" and Error-Value
    3 "Too many association groups". These numbers MAY be set by operator or decided
    based on a local policy. </t>

    <t>If a PCE
    peer is unwilling or unable to process the ASSOCIATION object, it MUST return a
    PCErr message with the Error-Type "Not supported object" and follow the relevant
    procedures described in <xref target="RFC5440"/>.
    On receiving a PCEP
    message with ASSOCIATION, if a
    PCEP speaker could not add the LSP to the association group for any reason, it MUST
    return a PCErr message with Error-Type 26 (Early allocation by IANA) "Association Error" and Error-Value
    7 "Cannot join the association group".</t>

    <t>If a PCEP speaker receives an ASSOCIATION object for an operator-configured association 
      and the association identifier is not in the operator-configured association range
      for the Association type and Association Source, it MUST return a PCErr message with Error-Type 26 (Early allocation by IANA) 
      "Association Error" and Error-Value 8 "Association identifier not in range".
    </t>

      <t>If a PCEP speaker receives ASSOCIATION in PCReq message, and the association
    is not known (association is not configured, or created dynamically, or learned from a PCEP peer), it MUST
    return a PCErr message with Error-Type 26 (Early allocation by IANA) "Association Error" and Error-Value
    4 "Association unknown".</t>

    <t>If the association information (related to the association group as a whole)
    received from the peer does not match with the local operator-configured
    information, it MUST
    return a PCErr message with Error-Type 26 (Early allocation by IANA) "Association Error" and Error-Value
    5 "Operator-configured association information mismatch". On receiving association
    information (related to the association group as a whole) that does not match with the association information previously received
    about the same association from a peer, it MUST
    return a PCErr message with Error-Type 26 (Early allocation by IANA) "Association Error" and Error-Value
    6 "Association information mismatch". Note that information related to each LSP within the association as part of the association information TLVs could be different.
    </t>

    <t>If a PCEP speaker receives an ASSOCIATION object with the R bit set for removal, and the association
    group (identified by association parameters) is not known, it MUST
    return a PCErr message with Error-Type 26 (Early allocation by IANA) "Association Error" and Error-Value
    4 "Association unknown". </t>



    <t>The dynamic associations are cleared along with the LSP state information as
      per the <xref target='RFC8231'></xref>. When a
      PCEP session is terminated,
      after expiry of State Timeout Interval at PCC, the LSP state associated
      with that PCEP session is reverted to operator-defined default
      parameters or behaviours. Same procedure is also followed for the association groups. On session
      termination at the PCE, when the LSP state reported by PCC is cleared, the association groups
      are also cleared. When there are no LSPs in an association group, the association is considered to be empty and thus deleted. </t>

      <t>In case the LSP is delegated to another PCE on session failure,
      the associations (and association information) set by the PCE remains intact, unless updated by the new PCE that takes over. </t>

    <!--<t>
      The association timeout interval is as a PCC-local value that can be
      operator-configured or computed by the PCC based on local policy and is used in the context
      of cleaning up associations on session failure. The associatioThe association timeout
      must be set to a value no larger than the state timeout interval (defined in
         <xref target='RFC8231'></xref>) and larger than the delegation
          timeout interval (defined in
         <xref target='RFC8231'></xref>.
    </t>


     <t>
       When a PCC's PCEP session with the PCE terminates unexpectedly, the PCC MUST
       wait for the association timeout interval before cleaning up the association.
       If this PCEP session can be re-established before the association timeout
       interval time expires, no action is taken to clean the association created by
      this PCE. During the time window of the redelegation timeout interval and
      the association timeout interval, the PCE, after re-establishing the session,
      can also ask for redelegation following the procedure
      defined in <xref target='RFC8231'></xref>  and
      <xref target='RFC8281'></xref>.
      When the association timeout interval timers expires,
      the PCC clears all the associations which are not delegated to any PCEs.
     </t>-->

     <t>Upon LSP delegation revocation, the PCC MAY clear the association
     created by the PCE, but in order to avoid traffic loss, it SHOULD perform this
     in a make-before-break fashion (same as <xref target='RFC8231'/>).</t>

    



     <!--<t>Error handling for situations for multiple PCE scenarios will be included in
     future versions of this draft.
     </t>-->

    </section> <!-- Rules  -->

    </section> <!-- Association Object -->



    <section anchor="IANA-considerations" title="IANA Considerations">
      <t>IANA maintains the "Path Computation Element Protocol (PCEP) Numbers"
   registry at &lt;http://www.iana.org/assignments/pcep&gt;.</t>
    <section title="PCEP Object">

        <t>The "PCEP Numbers" registry contains a subregistry "PCEP Objects".
          IANA is requested to confirm the early allocation of the following
   code point in the PCEP Objects registry.
        </t>
        <texttable anchor="Object-Code-Points" style="none" suppress-title="true">
          <ttcol align="center">Object-Class Value &nbsp;</ttcol>
          <ttcol align="left" width='50%'>Name </ttcol>
          <ttcol align="left">Reference </ttcol>
          <c></c><c>&nbsp;&nbsp;&nbsp;&nbsp;</c><c></c>
          <c>40 (Early allocation by IANA)</c><c>Association</c><c>[This.I-D]</c>
          <c></c><c>Object-Type</c><c></c>
          <c></c><c>&nbsp;&nbsp;&nbsp;&nbsp;0: Reserved </c><c></c>
          <c></c><c>&nbsp;&nbsp;&nbsp;&nbsp;1: IPv4 </c><c></c>
          <c></c><c>&nbsp;&nbsp;&nbsp;&nbsp;2: IPv6 </c><c></c>
        </texttable>
   </section>
    <section title="PCEP TLV">
   <t>IANA is requested to confirm the early allocation of the following
   code point in the "PCEP TLV Type Indicators" registry.
   </t>

        <texttable anchor="new-association-TLV-CP" style="none" suppress-title="true">
          <ttcol align="center" width='20%'>Value</ttcol>
          <ttcol align="left" width='40%'>Meaning </ttcol>
          <ttcol align="left" width='40%'>Reference </ttcol>
          <c>29 (Early allocation by IANA)</c><c>&nbsp;Operator-configured Association Range</c><c>[This.I-D]</c>
          <c>30 (Early allocation by IANA)</c><c>&nbsp;Global Association Source</c><c>[This.I-D]</c>
          <c>31 (Early allocation by IANA)</c><c>&nbsp;Extended Association ID</c><c>[This.I-D]</c>
        </texttable>

        <t>IANA is requested to fix the meaning for value 31 in the above registry to 'Extended Association ID', it is currently mentioned as 'Extended Association Id'.</t>

   <t>IANA is also requested to make a new assignment for
   the existing "PCEP TLV Type Indicators" registry as follows:
   </t>

        <texttable anchor="new-association-TLV-CP-2" style="none" suppress-title="true">
          <ttcol align="center" width='20%'>Value</ttcol>
          <ttcol align="left" width='40%'>Meaning </ttcol>
          <ttcol align="left" width='40%'>Reference </ttcol>
          <c>TBD</c><c>&nbsp;ASSOC-Type-List</c><c>[This.I-D]</c>
        </texttable>


    </section>
    <section title="Association Flags">
        <t>This document requests IANA to create a subregistry of the "PCEP Numbers" for
        the bits carried in the Flags field of the ASSOCIATION object.
        The subregistry is called "ASSOCIATION Flags Field". New values are
   assigned by Standards Action <xref target="RFC8126"/>.  Each bit should be tracked
   with the following qualities:
   <list style="symbols">
   <t>Bit number (counting from bit 0 as the most significant bit)</t>
   <t>Capability description</t>
   <t>Defining RFC</t>
 </list></t>

         <texttable anchor="Association-Flags" style="none" suppress-title="true">
          <ttcol align="left" width='10%'>Bit</ttcol>
          <ttcol align="left" width='50%'>Description </ttcol>
          <ttcol align="left" width='40%'>Reference </ttcol>
          <c></c><c>&nbsp;&nbsp;&nbsp;&nbsp;</c><c></c>
          <c>15</c><c>R (Removal)</c><c>[This.I-D]</c>
        </texttable>

        </section>
        <section title="Association Type" anchor="iana_assoc_type">
          <t>This document requests IANA to create a subregistry of the "PCEP Numbers" for
            the Association Type field of the the ASSOCIATION object.
            The subregistry is called "ASSOCIATION Type Field". New values are
            to be assigned by Standards Action <xref target="RFC8126"/>.  Each value should be
            tracked with the following qualities:
            <list style="symbols">   
            <t>Type</t>
            <t>Name</t>
            <t>Reference</t>
          </list></t>
            <t>There are no association types specified in this document, future documents should request the 
              assignment of association types from this subregistry.</t>

        </section>  
              <section title="PCEP-Error Object"
               toc="default">
        <t>IANA is requested to confirm the early allocation of the following code points within
   the "PCEP-ERROR Object Error Types and Values" sub-registry of the
   "PCEP Numbers" registry, as follows:</t>
        <figure title=""
                suppress-title="true"
                align="left"
                alt=""
                width=""
                height="">
          <artwork xml:space="preserve"
         name=""
         type=""
         align="left"
         alt=""
         width=""
         height="">
<![CDATA[
    Error-Type  Meaning
       26       Association Error [This.I-D]
    (early      Error-value=0:
    alloc by       Unassigned
    IANA)       Error-value=1:
                   Association type is not supported
                Error-value=2:
                  Too many LSPs in the association group
                Error-value=3:
                  Too many association groups
                Error-value=4:
                  Association unknown
                Error-value=5:
                  Operator-configured association 
                  information mismatch
                Error-value=6:
                  Association information mismatch
                Error-value=7:
                  Cannot join the association group  
                Error-value=8:
                  Association identifier not in range  
    ]]>

</artwork>
        </figure>
      </section>

    </section> <!-- IANA -->

   <section anchor="Security" title="Security Considerations">

     <t>The security considerations described in <xref target='RFC8231'></xref> and <xref target='RFC5440'/>
   apply to the extensions described in this document as well.  Additional
   considerations related to a malicious PCEP speaker are introduced, as associations could be spoofed and could be used as an
   attack vector. An attacker could report too many associations in an attempt to load the PCEP peer. The PCEP peer responds with 
   PCErr as described in <xref target="Rules"/>. An attacker could impact LSP operations by creating bogus associations. 
   Further, association groups could provides an adversary with the opportunity to eavesdrop on the relationship
   between the LSPs. 
   Thus securing the PCEP session using Transport Layer
   Security (TLS) <xref target="RFC8253"/>, as per the recommendations and
   best current practices in <xref target="RFC7525"/>, is RECOMMENDED.
  </t>
  <t>Much of the information carried in the ASSOCIATION object, as per this document is not extra sensitive. It often reflects information
    that can also be derived from the LSP Database, but association provides a much easier grouping of related LSPs and messages. Implementations 
    and operator can and should use indirect values in ASSOCIATION as a way to hide any sensitive business relationships.</t>
   </section>
<section title="Manageability Considerations" toc="default">
 <t>
  All manageability requirements and considerations listed in <xref target="RFC5440" pageno="false" format="default" /> 
  and <xref target="RFC8231" pageno="false" format="default" /> 
  apply to PCEP protocol extensions defined in this document. In addition, requirements and considerations listed in this section apply. 
  </t>
 <section title="Control of Function and Policy" toc="default">
 <t>
  A PCE or PCC implementation MUST allow operator-configured associations and SHOULD allow setting of the operator-configured association range (<xref target="Range"/>) as described in this document. 
  </t>
  </section>
 <section title="Information and Data Models" toc="default">
  <t>An implementation SHOULD allow the operator to view the associations configured or created dynamically. Further implementation SHOULD allow to view associations reported by each peer, and the current set of LSPs in the association.  To serve this purpose, the PCEP YANG module <xref target="I-D.ietf-pce-pcep-yang"/> includes association groups.</t> 
  <t>It might also be useful to find out how many associations for each association type currently exist and to know how many free association identifiers are available for a particular association type and source.</t>
  </section>
 <section title="Liveness Detection and Monitoring" toc="default">
 <t>
  Mechanisms defined in this document do not imply any new liveness detection and monitoring requirements in addition to those already listed in <xref target="RFC5440" pageno="false" format="default" />. 
  </t>
  </section>
 <section title="Verify Correct Operations" toc="default">
 <t>
  Mechanisms defined in this document do not imply any new operation verification requirements in addition to those already listed in <xref target="RFC5440" pageno="false" format="default" /> 
  and <xref target="RFC8231" pageno="false" format="default" />. 
  </t>
  </section>
 <section title="Requirements on Other Protocols" toc="default">
  <t>Mechanisms defined in this document do not imply any new requirements on other protocols.</t> 
  </section>
 <section title="Impact on Network Operations" toc="default">
  <t>
  Mechanisms defined in <xref target="RFC5440" pageno="false" format="default" /> 
  and 
  <xref target="RFC8231" pageno="false" format="default" /> also apply to PCEP extensions defined in this document. </t>  
  </section>
  </section>
   <section anchor="Acknowledgments" title="Acknowledgments">
     <t>We would like to thank Yuji Kamite and Joshua George for
     their contributions to this document. Also thanks to Venugopal Reddy,
     Cyril Margaria, Rakesh Gandhi, Mike Koldychev, and Adrian Farrel for their useful comments.</t>
     <t>We would like to thank Julien Meuric for shepherding this
   document and providing comments with text suggestions.</t>
   <t>Thanks to Stig Venaas for the RTGDIR review.</t>
    </section>

   <section anchor="Contributor" title="Contributors">

   <figure><artwork>
Stephane Litkowski
Orange

Email: stephane.litkowski@orange.com

Xian Zhang
Huawei Technologies
F3-1-B RnD Center, Huawei Base
Bantian, Longgang District
Shenzhen 518129
China

Email: zhang.xian@huawei.com

Mustapha Aissaoui
Nokia

Email: mustapha.aissaoui@nokia.com
 

</artwork></figure>
    </section><!-- Contributor -->

  </middle>

  <back>
    <references title="Normative References">
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.5440.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.5511.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.6780.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.8174.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.8231.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.8281.xml"?>
      
   </references>

   <references title="Informative References">
     <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.4657.xml"?>
     <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.4872.xml"?>
     <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.4873.xml"?>
     <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.6007.xml"?>
     <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.7525.xml"?>
     <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.7551.xml"?>
     <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.8051.xml"?>
     <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.8126.xml"?>      
     <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.8253.xml"?>
     
     <?rfc include="reference.I-D.ietf-pce-pcep-yang.xml"?>
   </references>
   <section title="Example for Operator-configured Association Range" anchor="ex">
    <t>Consider an association type T1 (which allows both dynamic and operator-configured association with a default range of &lt;0x1000, 0xffff&gt;). Consider that, because of need of the network, the PCE needs to create more dynamic associations and would like to change the association range to &lt;0xbffe, 0xffff&gt; instead. During PCEP session establishment the PCE would advertise the new range, the PCC could skip advertising as the default values are used. If a PCC is creating a dynamic association (with PCC as association source) it needs to pick a free association identifier for type T1 in the range of &lt;0x1, 0x0fff&gt; whereas if a PCE is creating a dynamic association (with PCE as association source) it needs to pick a free association identifier from the range &lt;0x1, 0xbffd&gt;. Similarly if an operator-configured association is manually configured with the PCC as association source, it should be from the range &lt;0x1000, 0xffff&gt; whereas if the PCE is association source, it should be from &lt;0xbffe, 0xffff&gt;. In case the association source is not a PCEP peer (for example an NMS system), then the default range of &lt;0x1000, 0xffff&gt; is considered.</t>
   </section>
  </back>
</rfc>
