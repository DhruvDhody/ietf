<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<?rfc toc="yes"?>
<?rfc tocompact="yes"?>
<?rfc tocdepth="3"?>
<?rfc tocindent="yes"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="no"?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<rfc category="std" docName="draft-ietf-pce-association-group-03" ipr="trust200902">
  <front>
    <title abbrev="PCE association group">
    PCEP Extensions for Establishing Relationships Between Sets of LSPs</title>

    <author fullname="Ina Minei" initials="I." surname="Minei">
      <organization>Google, Inc.</organization>
      <address>
    <postal>
      <street>1600 Amphitheatre Parkway</street>
      <city>Mountain View</city>
      <region>CA</region>
      <code>94043</code>
      <country>US</country>
    </postal>
    <email>inaminei@google.com</email>
      </address>
    </author>

    <author fullname="Edward Crabbe" initials="E." surname="Crabbe">
      <organization>Individual Contributor</organization>
      <address>
        <email>edward.crabbe@gmail.com</email>
      </address>
    </author>

    <author fullname="Siva Sivabalan" initials="S." surname="Sivabalan">
      <organization>Cisco Systems, Inc.</organization>
      <address>
    <postal>
      <street>170 West Tasman Dr.</street>
      <city>San Jose</city>
      <region>CA</region>
      <code>95134</code>
      <country>US</country>
    </postal>
    <email>msiva@cisco.com</email>
      </address>
    </author>

    <author fullname="Hariharan Ananthakrishnan" initials="H." surname="Ananthakrishnan">
      <organization>Packet Design</organization>
      <address>
    <email>hari@packetdesign.com</email>
      </address>
    </author>

    <author fullname="Dhruv Dhody" initials="D." surname="Dhody">
      <organization>Huawei</organization>
      <address>
        <postal>
          <street>Divyashree Techno Park, Whitefield</street>
          <city>Bangalore</city>
          <region>KA</region>
          <code>560066</code>
          <country>India</country>
        </postal>
        <email>dhruv.ietf@gmail.com</email>
        <!-- uri and facsimile elements may also be added -->
      </address>
    </author>


    <author fullname="Yosuke Tanaka" initials="Y." surname="Tanaka">
      <organization>NTT Communications Corporation</organization>
      <address>
    <postal>
      <street>Granpark Tower 3-4-1 Shibaura, Minato-ku
</street>
      <city>Tokyo</city>
      <region></region>
      <code>108-8118</code>
      <country>Japan</country>
    </postal>
    <email>yosuke.tanaka@ntt.com</email>
      </address>
    </author>

    <date day="17" month="May" year="2017" />

    <workgroup>PCE Working Group</workgroup>

    <abstract>
    <t> This document introduces a generic mechanism to create a grouping of LSPs in the
       context of a PCE.
       This grouping can then be used to define associations between sets of LSPs or between a
       set of LSPs and a set of attributes (such as configuration parameters or behaviors),
       and is equally applicable to stateful PCE (active and passive modes) and stateless PCE.
       </t>
    </abstract>

    <note title="Requirements Language">
      <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <xref target="RFC2119"/>.
      </t>
    </note>
  </front>

  <middle>
    <section title="Introduction">
      <t><xref target="RFC5440"/> describes the Path Computation Element
      Protocol PCEP.  PCEP enables the communication between a Path Computation
      Client (PCC) and a Path Control Element (PCE), or between PCE and PCE,
      for the purpose of computation of Multiprotocol Label Switching (MPLS) as well
      as Generalzied MPLS (GMPLS) for Traffic
      Engineering Label Switched Path (TE LSP) characteristics.
      </t>

      <t><xref target='I-D.ietf-pce-stateful-pce'>Stateful pce</xref>  specifies a
      set of extensions to PCEP to enable stateful
      control of TE LSPs between and across PCEP sessions in compliance with
      <xref target="RFC4657"/> and focuses on a model where LSPs are configured
      on the PCC and control over them is delegated to the PCE. The model of
      operation where LSPs are initiated from the PCE is described in
      <xref target='I-D.ietf-pce-pce-initiated-lsp'></xref>.
      </t>

       <t> This document introduces a generic mechanism to create a grouping of LSPs.
       This grouping can then be used to define associations between sets of LSPs or between a
       set of LSPs and a set of attributes (such as configuration parameters or behaviors),
       and is equally applicable to stateful PCE (active and passive modes) and stateless PCE.
       The associations could be created dynamically and conveyed to a PCEP peer within PCEP, or
       it could be configured by an operator on the PCEP peers. Refer <xref target="Operation-overview"/> for more details.
       </t>


    </section> <!-- Introduction -->

    <section title="Terminology">
      <t>This document uses the following terms defined in <xref
      target="RFC5440"/>: PCC, PCE, PCEP Peer.  </t>
      <t>This document uses the following terms defined in <xref
      target="RFC8051"/>: Stateful PCE, Delegation.</t>
      <t>This document uses the following terms defined in <xref
      target="I-D.ietf-pce-stateful-pce"/>: Redelegation Timeout Interval, LSP State
   Report, LSP Update Request.</t>
      <t>This document uses the following terms defined in <xref
        target='I-D.ietf-pce-pce-initiated-lsp'/>: PCE-initiated LSP, LSP Initiate.</t>

      <t> The following term is defined in this document: </t>

      <t> Association Timeout Interval: when a PCEP session is terminated,
      a PCC waits for this time period before deleting associations created by the PCEP peer.
      </t>
    </section> <!-- Terminology -->


    <section anchor="Overview" title="Architectural Overview">
     <section anchor="Motivation" title="Motivation">
     <t>
         Stateful PCE provides the ability to update existing LSPs and to instantiate new ones.
         To enable support for PCE-controlled make-before-break and for protection, there is a need
         to define associations between LSPs. For example, the association between the original
         and the re-optimized path in the make-before break scenario, or between the
         working and protection path in end-to-end protection. Another use for LSP grouping is for
         applying a common set of configuration parameters or behaviors to a set of LSPs.
     </t>
    <t>
      For a  stateless PCE, it might be useful to associate a path
      computation request to an association group, thus enabling it to associate
      a common set of policy, configuration parameters or behaviors with the request.
     </t>
     <t>Some associations could be created dynamically, such as association between the working and protections LSPs of a tunnel. Whereas
        some association could be created by the operator manually, such as policy based association, where the LSP could join
        an operator-configured existing association.</t>
    <t>
     Rather than creating separate mechanisms for each use case, this draft defines a generic mechanism that can
     be reused as needed.
     </t>
      </section><!-- Motivation -->

      <section anchor="Operation-overview" title="Operation Overview">
     <t>
     LSPs are associated with other LSPs with which they interact by
     adding them to a common association group.  Association groups as
     defined in this document can be applied to LSPs originating at the same head end
     or different head ends.</t>

     <t>Some associations could be created dynamically by a PCEP speaker and the associations (along with the set of LSPs) are conveyed to a PCEP peer.
        Whereas, some associations are configured by the operator on the PCEP peers involved before hand, a PCEP speaker then could ask for a LSP to join the operator-configured association. Usage of dynamic and configured is usually dependent on the type of the association.</t>

        <t>For the operator-configured association, the association identifier, type,
     as well as the association source IP address is manually configured by the operator. In case of dynamic association, the association identifier is allocated dynamically by the PCEP speaker. A range of association identifier is marked for operator-configured associations. The dynamically created association can then be reported to the PCEP peer
     via the PCEP messages as per the stateful extensions. The association are properties of the LSP and could be stored in the LSP state database. Thus, the dynamic association exist as long as the LSP state. In case of PCEP session termination, the LSP state clean up SHOULD also take care of associations.</t>



     <!--<t>For LSPs originating at the same head end, the association
     can be initiated by either the PCC (head end)  or by a PCE.  Only a stateful
     PCE can initiate an association for LSPs originating at different head ends.
     For both cases, the association is uniquely identified by the combination of an association
     identifier and the address of the node that created the association.
     </t>-->

     <t>
         Multiple types of associations can exist, each with their own association identifier space.
     The definition of the different association types and their behaviors is
     outside the scope of this document.  The establishment and removal of the
     association relationship can be done on a per LSP basis.
     An LSP may join multiple association groups, of different or of the same association type.
         </t>

    <!--<t>
    In the case of a stateless PCE, associations are created out of band, and
    PCEP peers should be aware of the association and its significance
    outside of the protocol.
    </t>-->

    <!--<t>
    Association groups can be created by both PCC and PCE. When a PCC's
    PCEP session with a PCE terminates unexpectedly, the PCC cleans up associations (as per
    the processing rules in this document).
    </t>-->

      </section><!-- Operation overview -->
      <section title="Operator-configured Association Range" anchor="Range">
        <t>A range of association identifier are kept for the operator-configured associations.
            Dynamic associations MUST NOT use the identifier from this range. </t>
        <t>Two proposals -
        <list style="symbols">
            <t>All operator-configured associations MUST use identifier from the
               range 0x10000 to 0xFFFFF and encode it in the extended association
               id TLV. (<xref target="EXT-association"/>)</t>
            <t>Operator is allowed to configure a range of identifier earmarked
                for operator-configured associations, this information MUST be
                advertised to the peer.</t>
        </list>
        </t>
        <t>TBD</t>
      </section>
     </section><!-- Overview -->



    <section anchor="association" title="ASSOCIATION Object">
    <section anchor="Definition" title="Object Definition">

        <!--Creation of an association group and modifications to its membership
        can be initiated by either the PCE or the PCC.-->
         <t>Association groups
        and their memberships are defined using a new ASSOCIATION object.
      </t>

    <t>ASSOCIATION Object-Class is to be assigned by IANA (TBD).</t>
    <t> ASSOCIATION Object-Type is 1 for IPv4 and its format is shown in
    <xref target="Association-Object-Fmt1"/>:</t>

     <figure anchor="Association-Object-Fmt1" title="The IPv4 ASSOCIATION Object format">
     <artwork><![CDATA[

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         Reserved              |            Flags            |R|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Association type         |      Association ID           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              IPv4 Association Source                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   //                   Optional TLVs                             //
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

          ]]></artwork>
        </figure>

    <t> ASSOCIATION Object-Type is 2 for IPv6 and its format is shown in
    <xref target="Association-Object-Fmt2"/>:</t>

     <figure anchor="Association-Object-Fmt2" title="The IPv6 ASSOCIATION Object format">
     <artwork><![CDATA[

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         Reserved              |            Flags            |R|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Association type         |      Association ID           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                    IPv6 Association Source                    |
   |                                                               |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   //                   Optional TLVs                             //
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

          ]]></artwork>
        </figure>
        <t> Reserved: 16 bits - MUST be set to 0 and ignored upon receipt. </t>
    <t>
    Flags: 16 bits -  The following flags are currently defined:

    <list style="hanging">
            <t hangText="R (Removal - 1 bit):"> when set, the requesting
            PCE peer requires the removal of an LSP from the association group.</t>
    </list>
    </t>
    <t>
    Association type: 16 bits - the association type (for example protection).
        The association type will be defined
    in separate documents.
    </t>

    <t> Association ID: 16 bits - the identifier of the association group.  When combined
    with Type and Association Source, this value uniquely identifies an association group.
    The value 0xffff and 0x0 are reserved. The value 0xffff is used to indicate
    all association groups. To accommodate more number of associations, Extended Association ID TLV
    can be included. In case of the operator-configured association, this field is set to 0x0 and the
    association identifier is encoded in the Extended Association ID TLV.
    </t>


    <t> Association Source: 4 or 16 bytes - An IPv4 or IPv6 address. This could be the IP
        address of the PCEP speaker that created a dynamic association, an operator configured IP address, or an IP
        address selected as per the local policy. The value such as 0.0.0.0 or ::/128 are acceptable.
    </t>

    <t> Optional TLVs: The optional TLVs follow the PCEP TLV format
        of <xref target="RFC5440"/>. This document defines two optional TLVs. Other documents can define more TLVs.
    </t>

    <section anchor="Global-association-src" title="Global Association Source TLV">

      <t> The Global Association Source TLV is an optional TLV for use in the Association Object.
      </t>

   <figure anchor="Global-Association-Object-Fmt1" title="The Global Association Source TLV  format">
     <artwork><![CDATA[

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         Type                  |            Length             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              Global Association Source                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


          ]]></artwork>
        </figure>
    <t> Type: To be allocated by IANA </t>
    <t> Length: Fixed value of 4 bytes </t>
    <t> Global Association Source: as defined in <xref target="RFC6780"/> </t>

    </section>



    <section anchor="EXT-association" title="Extended Association ID TLV">

      <t> The Extended Association ID TLV is an optional TLV for use in
      the Association Object.
      </t>

   <figure anchor="Ext-id-Object-Fmt1" title="The Extended Association ID  TLV  format">
     <artwork><![CDATA[

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         Type                  |            Length             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   //                Extended Association ID                       //
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


          ]]></artwork>
        </figure>
    <t> Type: To be allocated by IANA </t>
    <t> Length: variable </t>
    <t> Extended Association ID: as defined in <xref target="RFC6780"/>. The operator-configured associations
    MUST use the extended association ID TLV to encode the association ID from the association identifier range carved out for the
    operator-configured associations. This is done to avoid any conflict in association identifier between the
    manual configurations and the dynamic associations.</t>

    </section>

    </section> <!-- Object Definition -->

    <section  anchor="Object-Encoding" title="Object Encoding in PCEP messages">
    <section  title="Stateful PCEP messages">

    <t> The ASSOCIATION Object is OPTIONAL and MAY be carried in the Path
    Computation Update (PCUpd), Path Computation Report (PCRpt) and Path
    Computation Initiate (PCInitiate) messages. </t>

    <t> When carried in PCRpt message, it is used to report the association
    group membership information pertaining to a LSP to a stateful PCE.
    It can also be used to remove an LSP from one or more association groups
    by setting the R flag to 1  in the ASSOCIATION object.  Unless, a PCE wants to delete an association
    from an LSP, it does not need to carry the ASSOCIATION
    object in future messages.</t>

    <t> The PCRpt message is defined in <xref target='I-D.ietf-pce-stateful-pce'></xref>
    and updated as below:</t>

    <figure>
    <artwork><![CDATA[

   <PCRpt Message> ::= <Common Header>
                          <state-report-list>
   Where:

      <state-report-list> ::= <state-report>[<state-report-list>]

      <state-report> ::= [<SRP>]
                         <LSP>
                         [<association-list>]
                         <path>
    Where:
      <path>::= <intended-path>
                [<actual-attribute-list><actual-path>]
                <intended-attribute-list>


      <association-list> ::= <ASSOCIATION> [<association-list>]
    ]]></artwork>
    </figure>

    <t> When an LSP is delegated to a stateful PCE, the stateful PCE can initiate
    a new association group for this LSP, or associate it with one or more existing
    association groups. This is done by including the  ASSOCIATION Object in a
    PCUpd message.  A stateful PCE can also remove a delegated
    LSP from one or more association groups by setting the R flag to 1 in the ASSOCIATION object.</t>

    <t> The PCUpd message is defined in <xref target='I-D.ietf-pce-stateful-pce'></xref>
    and updated as below:</t>

    <figure>
       <artwork><![CDATA[
    <PCUpd Message> ::= <Common Header>
                        <update-request-list>
 Where:

    <update-request-list> ::= <update-request>[<update-request-list>]

    <update-request> ::= <SRP>
                         <LSP>
                         [<association-list>]
                         <path>
 Where:
    <path>::= <intended-path><intended-attribute-list>

    <association-list> ::= <ASSOCIATION> [<association-list>]
     ]]></artwork>
    </figure>
    <t>A PCE initiating a new LSP, can include the association group information. This is done by including the ASSOCIATION Object in a
    PCInitiate message.
    The PCInitiate message is defined in <xref target='I-D.ietf-pce-pce-initiated-lsp'></xref>
    and updated as below:
    </t>
    <figure>
      <artwork><![CDATA[
<PCInitiate Message> ::= <Common Header>
                              <PCE-initiated-lsp-list>
Where:

<PCE-initiated-lsp-list> ::= <PCE-initiated-lsp-request>
                             [<PCE-initiated-lsp-list>]

<PCE-initiated-lsp-request> ::= (<PCE-initiated-lsp-instantiation>|
                                <PCE-initiated-lsp-deletion>)

<PCE-initiated-lsp-instantiation> ::= <SRP>
                                      <LSP>
                                      [<END-POINTS>]
                                      <ERO>
                                      [<association-list>]
                                      [<attribute-list>]

Where:
<association-list> ::= <ASSOCIATION> [<association-list>]
    ]]></artwork>
    </figure>
    </section>
    <section  title="Request Message">
    <t>
    In case of passive stateful or stateless PCE, the ASSOCIATION Object
    is OPTIONAL and MAY be carried in the Path Computation Request
   (PCReq) message.
   </t>
   <t>
    When carried in a PCReq message, the ASSOCIATION Object is used to associate the path
   computation request to an association group. The association (and the other LSPs) should be known to the PCE before hand.
   These could be operator-configured or dynamically learned before. The R flag in ASSOCIATION object within PCReq message
   MUST be set to 0 while sending and ignored on receipt.

   </t>
   <t>
   The PCReq message is defined in [RFC5440] and updated in
   [I-D.ietf-pce-stateful-pce], it is further updated below for
   association:
   </t>

    <figure>
      <artwork><![CDATA[
<PCReq Message>::= <Common Header>
                   [<svec-list>]
                   <request-list>

Where:
      <svec-list>::= <SVEC>[<svec-list>]
      <request-list>::= <request>[<request-list>]

      <request>::= <RP>
                   <END-POINTS>
                   [<LSP>]
                   [<LSPA>]
                   [<BANDWIDTH>]
                   [<metric-list>]
                   [<association-list>]
                   [<RRO>[<BANDWIDTH>]]
                   [<IRO>]
                   [<LOAD-BALANCING>]

Where:
      <association-list> ::= <ASSOCIATION> [<association-list>]
    ]]></artwork>
    </figure>
    <t>
   Note that LSP object MAY be present for the passive stateful PCE mode.

    </t>
    </section>
    </section> <!-- Object Encoding -->

    <section  anchor="Rules" title="Processing Rules">

    <t>
    Association groups can be operator-configured on the necessary PCC and PCE.
    In addition, a PCC or a PCE can create association groups dynamically.
    The PCEP speaker can reports the association to its peer via PCEP messages.
    <!--But a PCE peer cannot add new members for association group created by
    another peer.-->
    If a
    PCEP speaker does not recognize the ASSOCIATION object, it MUST return a PCErr
    message with Error-Type  "Unknown Object" as described in [RFC5440].
    If a
    PCEP speaker understand the ASSOCIATION object but does not support the association-type,
    it MUST return a PCErr
    message with Error-Type TBD "Association Error" and Error-Value
    1 "Association-type is not supported".
    On receiving a PCEP
    message with ASSOCIATION, if a
    PCEP speaker finds that too many LSPs belong to the association group, it MUST
    return a PCErr message with Error-Type TBD "Association Error" and Error-Value
    2 "Too many LSPs in the association group". If a PCEP speaker cannot handle
    a new associations, it MUST
    return a PCErr message with Error-Type TBD "Association Error" and Error-Value
    3 "Too many association groups". These number MAY be set by operator or decided
    based on a local policy. </t>

    <t>If a PCE speaker receives ASSOCIATION in PCReq message, and the association
    information is not known (association is not configured, or created dynamically, or learned from a PCEP peer), it MUST
    return a PCErr message with Error-Type TBD "Association Error" and Error-Value
    4 "Association unknown". If the association information
    received from the peer does not match with the local operator configured
    information, it MUST
    return a PCErr message with Error-Type TBD "Association Error" and Error-Value
    5 "Operator-configured association information mismatch". On receiving association
    information that does not match with the association information previously received
    about the same association from a peer, it MUST
    return a PCErr message with Error-Type TBD "Association Error" and Error-Value
    6 "Association information mismatch".
    If a PCE
    peer is unwilling or unable to process the ASSOCIATION object, it MUST return a
    PCErr message with the Error-Type "Not supported object" and follow the relevant
    procedures described in [RFC5440].
    </t>

    <t>The association information is cleared along with the LSP state information as
        per the <xref target='I-D.ietf-pce-stateful-pce'></xref>. When a
      PCEP session is terminated,
      after expiry of State Timeout Interval at PCC, the LSP state associated
      with that PCEP session is reverted to operator-defined default
      parameters or behaviors. Same procedure is also followed for the association information. On session
      termination at the PCE, when the LSP state reported by PCC is cleared, the association information
      is also cleared. Where there are no LSPs in a association group, the association is considered to be deleted. </t>

      <t>In case the LSP is delegated to another PCE on session failure,
      the association information set by the PCE remains intact, unless updated by the new PCE. </t>

    <!--<t>
      The association timeout interval is as a PCC-local value that can be
      operator-configured or computed by the PCC based on local policy and is used in the context
      of cleaning up associations on session failure. The associatioThe association timeout
      must be set to a value no larger than the state timeout interval (defined in
         <xref target='I-D.ietf-pce-stateful-pce'></xref>) and larger than the delegation
          timeout interval (defined in
         <xref target='I-D.ietf-pce-stateful-pce'></xref>.
    </t>


     <t>
       When a PCC's PCEP session with the PCE terminates unexpectedly, the PCC MUST
       wait for the association timeout interval before cleaning up the association.
       If this PCEP session can be re-established before the association timeout
       interval time expires, no action is taken to clean the association created by
      this PCE. During the time window of the redelegation timeout interval and
      the association timeout interval, the PCE, after re-establishing the session,
      can also ask for redelegation following the procedure
      defined in <xref target='I-D.ietf-pce-stateful-pce'></xref>  and
      <xref target='I-D.ietf-pce-pce-initiated-lsp'></xref>.
      When the association timeout interval timers expires,
      the PCC clears all the associations which are not delegated to any PCEs.
     </t>-->

     <t>Upon LSP delegation revocation, the PCC MAY clear the association
     created by the PCE, but in order to avoid traffic loss, it can perform this
     in a make-before-break fashion, which is the same as what is defined in
     <xref target='I-D.ietf-pce-stateful-pce'>Stateful pce</xref> for handling
     LSP state cleanup.</t>

     <!--<t>Error handling for situations for multiple PCE scenarios will be included in
     future versions of this draft.
     </t>-->

    </section> <!-- Rules  -->

    </section> <!-- Association Object -->



    <section anchor="IANA-considerations" title="IANA Considerations">
    <section title="PCEP Object">

        <t>The "PCEP Parameters" registry contains a subregistry "PCEP Objects".
        This document request IANA to allocate the values from this registry.</t>
        <texttable anchor="Object-Code-Points" style="none" suppress-title="true">
          <ttcol align="center">Object-Class Value &nbsp;</ttcol>
          <ttcol align="left" width='50%'>Name </ttcol>
          <ttcol align="left">Reference </ttcol>
          <c></c><c>&nbsp;&nbsp;&nbsp;&nbsp;</c><c></c>
          <c>TBD</c><c>Association</c><c>[This I-D]</c>
          <c></c><c>Object-Type</c><c></c>
          <c></c><c>&nbsp;&nbsp;&nbsp;&nbsp;1: IPv4 </c><c></c>
          <c></c><c>&nbsp;&nbsp;&nbsp;&nbsp;2: IPv6 </c><c></c>
        </texttable>
   </section>
    <section title="PCEP TLV">
   <t>IANA is requested to make the
   assignment of a new value for the existing "PCEP TLV Type Indicators"
   registry as follows:</t>

        <texttable anchor="new-association-TLV-CP" style="none" suppress-title="true">
          <ttcol align="center" width='20%'>Value</ttcol>
          <ttcol align="left" width='40%'>Meaning </ttcol>
          <ttcol align="left" width='40%'>Reference </ttcol>
          <c>TBD</c><c>&nbsp;Global Association Source</c><c>[This I-D]</c>
          <c>TBD</c><c>&nbsp;Extended Association Id</c><c>[This I-D]</c>
        </texttable>
    </section>
    <section title="Association Flags">
        <t>This document requests IANA to create a subregistry of the "PCEP Parameters" for
        the bits carried in the Flags field of the ASSOCIATION object.
        The subregistry is called "ASSOCIATION Flags Field". </t>

        <t> The field contains 12 bits numbered from bit 0 as the most significant bit.</t>
         <texttable anchor="Association-Flags" style="none" suppress-title="true">
          <ttcol align="left">Bit;</ttcol>
          <ttcol align="left" width='50%'>Name: Description </ttcol>
          <ttcol align="left">Reference </ttcol>
          <c></c><c>&nbsp;&nbsp;&nbsp;&nbsp;</c><c></c>
          <c>15</c><c> R: Removal</c><c>[This I-D]</c>
        </texttable>

        </section>
              <section title="PCEP-Error Object"
               toc="default">
        <t>IANA is requested to allocate new error values within
   the "PCEP-ERROR Object Error Types and Values" sub-registry of the
   PCEP Numbers registry, as follows:</t>
        <figure title=""
                suppress-title="true"
                align="left"
                alt=""
                width=""
                height="">
          <artwork xml:space="preserve"
         name=""
         type=""
         align="left"
         alt=""
         width=""
         height="">
<![CDATA[
    Error-Type  Meaning
       TBD      Association Error [This I-D]
                Error-value=1:
                   Association-type is not supported
                Error-value=2:
                  Too many LSPs in the association group
                Error-value=3:
                  Too many association groups
                Error-value=4:
                  Association unknown
                Error-value=5:
                  Operator-configured association 
                  information mismatch
                Error-value=6:
                  Association information mismatch

    ]]>

</artwork>
        </figure>
      </section>

    </section> <!-- IANA -->

   <section anchor="Security" title="Security Considerations">

     <t> The security considerations described in <xref target='I-D.ietf-pce-stateful-pce'></xref> and <xref target='RFC5440'/>
   apply to the extensions described in this document as well.  Additional
   considerations related to a malicious PCEP speaker are introduced, as associations could be spoofed and could be used as an
   attack vector. An attacker could report too many associations in an attempt to load the PCEP peer. The PCEP peer responds with 
   PCErr as described in <xref target="Rules"/>. An attacker could impact LSP operations by creating bogus associations. 
   Further, association information could provides an adversary with the opportunity to eavesdrop on the relationship
   between the LSPs. 
   Thus securing the PCEP session using Transport Layer
   Security (TLS) <xref target="I-D.ietf-pce-pceps"/>, as per the recommendations and
   best current practices in <xref target="RFC7525"/>, is RECOMMENDED.
  </t>
   </section>
<section title="Manageability Considerations" toc="default">
 <t>
  All manageability requirements and considerations listed in <xref target="RFC5440" pageno="false" format="default" /> 
  and <xref target="I-D.ietf-pce-stateful-pce" pageno="false" format="default" /> 
  apply to PCEP protocol extensions defined in this document. In addition, requirements and considerations listed in this section apply. 
  </t>
 <section title="Control of Function and Policy" toc="default">
 <t>
  A PCE or PCC implementation MUST allow operator-configured associations as described in this document. The identifier MUST be from the operator-configured identifier range <xref target="Range"/>.  
  </t>
  </section>
 <section title="Information and Data Models" toc="default">
  <t>An implementation SHOULD allow the operator to view the associations configured or created dynamically. Further implementation SHOULD allow to view associations reported by each peer, and the current set of LSPs in the association .  To serve this purpose, the PCEP YANG module <xref target="I-D.ietf-pce-pcep-yang"/> can be extended to include association information.</t> 
  </section>
 <section title="Liveness Detection and Monitoring" toc="default">
 <t>
  Mechanisms defined in this document do not imply any new liveness detection and monitoring requirements in addition to those already listed in <xref target="RFC5440" pageno="false" format="default" />. 
  </t>
  </section>
 <section title="Verify Correct Operations" toc="default">
 <t>
  Mechanisms defined in this document do not imply any new operation verification requirements in addition to those already listed in <xref target="RFC5440" pageno="false" format="default" /> 
  and <xref target="I-D.ietf-pce-stateful-pce" pageno="false" format="default" />. 
  </t>
  </section>
 <section title="Requirements On Other Protocols" toc="default">
  <t>Mechanisms defined in this document do not imply any new requirements on other protocols.</t> 
  </section>
 <section title="Impact On Network Operations" toc="default">
  <t>
  Mechanisms defined in <xref target="RFC5440" pageno="false" format="default" /> 
  and 
  <xref target="I-D.ietf-pce-stateful-pce" pageno="false" format="default" /> also apply to PCEP extensions defined in this document. </t>  
  </section>
  </section>
   <section anchor="Acknowledgements" title="Acknowledgements">
     <t>We would like to thank Yuji Kamite and Joshua George for
     their contributions to this document. Also Thank Venugopal Reddy and
     Cyril Margaria for their useful comments.</t>
    </section>

   <section anchor="Contributor" title="Contributors">

   <figure><artwork>
   Stephane Litkowski
   Orange

   Email: stephane.litkowski@orange.com

   Xian Zhang
   Huawei Technologies
   F3-1-B RnD Center, Huawei Base
   Bantian, Longgang District
   Shenzhen 518129
   China

   Email: zhang.xian@huawei.com

   Mustapha Aissaoui
   Nokia

   Email: mustapha.aissaoui@nokia.com
</artwork></figure>
    </section><!-- Contributor -->

  </middle>

  <back>
    <references title="Normative References">
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.5440.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.6780.xml"?>
      <?rfc include="reference.I-D.ietf-pce-stateful-pce"?>
    <?rfc include="reference.I-D.ietf-pce-pce-initiated-lsp"?>
   </references>

   <references title="Informative References">
     <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.4657.xml"?>
     <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.7525.xml"?>
     <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.8051.xml"?>
     <?rfc include="reference.I-D.ietf-pce-pceps.xml"?>
     <?rfc include="reference.I-D.ietf-pce-pcep-yang.xml"?>
   </references>
  </back>
</rfc>
